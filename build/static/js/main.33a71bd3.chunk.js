(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"d",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"k",function(){return c}),a.d(t,"l",function(){return o}),a.d(t,"m",function(){return i}),a.d(t,"j",function(){return u}),a.d(t,"f",function(){return d}),a.d(t,"g",function(){return m}),a.d(t,"h",function(){return p}),a.d(t,"i",function(){return g}),a.d(t,"e",function(){return E});var n="https://medthreatapp.herokuapp.com",r="medthreat",l="123456",s="app_access_token",c="user_access_token",o="user_authorities",i="user_token_expiration",u="token_date",d="fobidden_count",m="GET",p="POST",g="PUT",E="DELETE"},14:function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return i}),a.d(t,"a",function(){return m}),a.d(t,"f",function(){return p}),a.d(t,"g",function(){return g}),a.d(t,"e",function(){return E}),a.d(t,"d",function(){return f}),a.d(t,"c",function(){return h});var n=a(50),r=a(75),l=a.n(r),s=a(10),c=a(150),o=a.n(c),i=function(e){var t={};if(e.useBasic){var a={Authorization:"".concat(d(s.c,s.d))};t=Object(n.a)({},t,a)}if(e.useAppAccessToken&&localStorage.getItem(s.b)){var r={Authorization:"Bearer ".concat(localStorage.getItem(s.b))};t=Object(n.a)({},t,r)}if(e.userAccessToken&&localStorage.getItem(s.k)){var c={Authorization:"Bearer ".concat(localStorage.getItem(s.k))};t=Object(n.a)({},t,c)}if(e.headerType){var o={"Content-Type":e.headerType};t=Object(n.a)({},t,o)}e.headerRequest={headers:t},e.headerTypeData&&(e.headerRequest.data={}),console.log("options.headerRequest"),console.log(e.headerRequest);var i=null;switch(e.method){case s.g:i=l.a.get(e.url,e.headerRequest);break;case s.h:i=l.a.post(e.url,e.data,e.headerRequest);break;case s.i:i=l.a.put(e.url,e.data,e.headerRequest);break;case s.e:i=l.a.delete(e.url,e.headerRequest);break;default:i=null}return u(i),i},u=function(e){e.then(function(e){}).catch(function(e){if(console.log("checkifStatusIsForbidden"),403==e.response.status){var t=0;localStorage.getItem(s.f)&&(t=parseInt(localStorage.getItem(s.f))),t+=1,localStorage.setItem(s.f,t)}console.log(e.response.status)})},d=function(t,a){var n=new e(t+":"+a).toString("base64");return console.log(n),"Basic "+n},m=function(e){var t={};if(e.useBasic){var a={Authorization:"".concat(d(s.c,s.d))};t=Object(n.a)({},t,a)}if(e.headerType){var r={"Content-Type":e.headerType};t=Object(n.a)({},t,r)}var c={headers:{Authorization:d(s.c,s.d),"Content-Type":"application/x-www-form-urlencoded"},data:{}};return console.log("options.headerRequest"),console.log(c),l.a.post(e.url,e.data,c)},p=function(e){localStorage.setItem(s.k,e);var t=o()(e);localStorage.setItem(s.l,t.authorities)},g=function(e){localStorage.setItem(s.j,Date.now()),localStorage.setItem(s.m,e)},E=function(){if(null==localStorage.getItem(s.k))return console.log("false"),!1;if(localStorage.getItem(s.k)){var e=localStorage.getItem(s.j),t=Date.now(),a=localStorage.getItem(s.m);console.log("TimeExpiration"),console.log(a);var n=(t-e)/1e3;return console.log("TimeDifferenceInSeconds"),console.log(n),!(n>a)}return!1},f=function(e){var t=localStorage.getItem(s.l);t=t.split(",");var a=!1;return e.forEach(function(e){t.includes(e)&&(a=!0)}),a},h=function(e){localStorage.getItem(s.f)&&(parseInt(localStorage.getItem(s.f))>=3&&e("/"))}}).call(this,a(222).Buffer)},215:function(e,t,a){e.exports=a(440)},220:function(e,t,a){},221:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),s=a.n(l),c=(a(220),a(22)),o=a(23),i=a(26),u=a(24),d=a(25),m=(a(221),a(38)),p=a(66),g=a(200),E=a(14),f=function(e){var t=e.component,a=(e.authenticated,Object(g.a)(e,["component","authenticated"]));return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return Object(E.e)()?r.a.createElement(t,Object.assign({},a,e)):r.a.createElement(p.a,{to:{pathname:"/",state:{from:e.location}}})}}))},h=(a(68),a(37)),b=(a(124),a(36)),v=(a(95),a(7)),y=(a(69),a(18)),k=a(50),S=a(31),O=(a(125),a(57)),T=a(10);a(75);var j=function(e){Object(E.f)(e.access_token),Object(E.g)(e.expires_in)},A=(a(150),O.a.Item),w=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=O.a.create()(D);return r.a.createElement(e,null)}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmitExperience=function(e){e.preventDefault(),a.setState({isloading:!0}),a.props.form.validateFields(function(e,t){if(e)a.setState({isloading:!1});else{console.log(t);var n=Object(k.a)({},t);console.log(n),function(e){e.grant_type="password",e.scope="profile";var t=[];for(var a in e){var n=encodeURIComponent(a),r=encodeURIComponent(e[a]);t.push("".concat(n,"=").concat(r))}return t=t.join("&"),console.log(t),Object(E.a)({url:T.a+"/oauth/token",method:T.h,data:t,useBasic:!0,headerType:"application/x-www-form-urlencoded"})}(t).then(function(e){console.log(Date.now()),j(e.data),y.a.success({message:"MEDTHREAT",description:"Successfully Logged In."}),a.props.form.resetFields(),a.setState({isloading:!1}),a.setRoute("drug")}).catch(function(e){e.response?(console.log(e.response),400==e.response.status&&"invalid_grant"==e.response.data.error&&"User account is locked"==e.response.data.error_description?(a.setState({isloading:!1}),y.a.error({message:"MEDTHREAT",description:"This Account Has been Blocked, Contact Administrator."})):400==e.response.status?(a.setState({isloading:!1}),y.a.error({message:"MEDTHREAT",description:"Username / Password  is Incorrect."}),console.log(e.response.status)):(a.setState({isloading:!1}),y.a.error({message:"MEDTHREAT",description:"An Error occured Contact Administrator."}),console.log(e.response.status))):(a.setState({isloading:!1}),y.a.error({message:"MEDTHREAT",description:"An Error occured Contact Administrator."}))})}})},a.setRoute=function(e){a.setState({redirectMe:{status:!0,path:"/".concat(e)}})},a.state={redirectMe:{status:!1,path:""},isloading:!1},a.onSubmitExperience=a.onSubmitExperience.bind(Object(S.a)(Object(S.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){localStorage.clear()}},{key:"render",value:function(){if(this.state.redirectMe.status)return console.log("Reiercting"),r.a.createElement(p.a,{to:this.state.redirectMe.path});var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"bg-dark",style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:"bg-dark sufee-login d-flex align-content-center flex-wrap",style:{height:"100%",width:"100%"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login-content"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("h2",null,"MEDTHREAT")),r.a.createElement("div",{className:"login-form"},r.a.createElement(h.a,{spinning:this.state.isloading},r.a.createElement("form",{onSubmit:this.onSubmitExperience},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(A,null,e("username",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(b.a,{className:"form-control",prefix:r.a.createElement(v.a,{type:"user"}),name:"username",placeholder:" Email"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(A,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"password",type:"password",placeholder:"Password"}))))),r.a.createElement(A,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-flat m-b-30 m-t-30"},"Login")),r.a.createElement("div",{className:"register-link m-t-15 text-center"},r.a.createElement("p",null,"Don't have account ? ",r.a.createElement(m.c,{to:"/sign-up"},"Sign up"))))))))))}}]),t}(n.Component),R=w,N=a(17),U=a.n(N),x=a(32);var I=function(){var e=Object(x.a)(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("grant_type","client_credentials"),e.next=4,Object(E.b)({useBasic:!0,data:t,url:"".concat(T.a,"/oauth/token"),method:T.h}).then(function(e){console.log("calling getBasicAuthentication"),localStorage.setItem(T.b,e.data.access_token)}).catch(function(e){y.a.error({message:"MEDTHREAT",description:"Server Error occured ."}),console.log(e)});case 4:case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("signUp"),e.next=3,I();case 3:return e.abrupt("return",Object(E.b)({useAppAccessToken:!0,data:t,url:"".concat(T.a,"/api/v1/user/create-sign-up"),method:T.h}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),M=O.a.Item,_=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=O.a.create()(z);return r.a.createElement(e,{onLogin:this.props.onLogin})}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmitExperience=function(e){e.preventDefault(),a.setState({isloading:!0}),a.props.form.validateFields(function(e,t){e||(console.log(t),C(t).then(function(e){console.log(e),y.a.success({message:"MEDTHREAT",description:"Successfully registered."}),a.props.form.resetFields(),a.setState({isloading:!1})}).catch(function(e){e.response&&(console.log(e.response),400==e.response.data.status&&(y.a.error({message:"MEDTHREAT",description:"".concat(e.response.data.status," Error occured .")}),console.log(e.response.status),a.setState({isloading:!1})),y.a.error({message:"MEDTHREAT",description:"An Error occured ."}),console.log(e.response.status),a.setState({isloading:!1})),a.setState({isloading:!1})}))})},a.state={isloading:!1},a.onSubmitExperience=a.onSubmitExperience.bind(Object(S.a)(Object(S.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"bg-dark",style:{height:"100vh"}},r.a.createElement("div",{className:"bg-dark sufee-login d-flex align-content-center flex-wrap"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login-content"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("h2",null,"MEDTHREAT")),r.a.createElement("div",{className:"login-form"},r.a.createElement(h.a,{spinning:this.state.isloading},r.a.createElement("form",{onSubmit:this.onSubmitExperience},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(M,null,e("firstName",{rules:[{required:!0,message:"Please input your First Name!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"firstName",placeholder:"First Name"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(M,null,e("lastName",{rules:[{required:!0,message:"Please input your lastName!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"lastName",placeholder:"Last Name"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(M,null,e("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(b.a,{className:"form-control",prefix:r.a.createElement(v.a,{type:"user"}),name:"email",placeholder:" Email"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(M,null,e("phoneNo",{rules:[{required:!0,message:"Please input your phoneNo!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"phoneNo",placeholder:"Phnoe Number"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(M,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"password",type:"password",placeholder:"Password"}))))),r.a.createElement(M,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-flat m-b-30 m-t-30"},"Register")),r.a.createElement("div",{className:"register-link m-t-15 text-center"},r.a.createElement("p",null,"Already have account ? ",r.a.createElement(m.c,{to:"/"},"Sign in"))))))))))}}]),t}(n.Component),L=_,B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmitExperience=function(e){e.preventDefault()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{id:"header",class:"header"},r.a.createElement("div",{class:"header-menu"},r.a.createElement("div",{class:"col-sm-7"},r.a.createElement("a",{id:"menuToggle",class:"menutoggle pull-left"},r.a.createElement("i",{class:"fa fa fa-tasks"})),r.a.createElement("div",{class:"header-left"},r.a.createElement("button",{class:"search-trigger"},r.a.createElement("i",{class:"fa fa-search"})),r.a.createElement("div",{class:"form-inline"},r.a.createElement("form",{class:"search-form"},r.a.createElement("input",{class:"form-control mr-sm-2",type:"text",placeholder:"Search ...","aria-label":"Search"}),r.a.createElement("button",{class:"search-close",type:"submit"},r.a.createElement("i",{class:"fa fa-close"})))),r.a.createElement("div",{class:"dropdown for-notification"},r.a.createElement("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"notification","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{class:"fa fa-bell"}),r.a.createElement("span",{class:"count bg-danger"},"5")),r.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"notification"},r.a.createElement("p",{class:"red"},"You have 3 Notification"),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-1",href:"#"},r.a.createElement("i",{class:"fa fa-check"}),r.a.createElement("p",null,"Server #1 overloaded.")),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-4",href:"#"},r.a.createElement("i",{class:"fa fa-info"}),r.a.createElement("p",null,"Server #2 overloaded.")),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-5",href:"#"},r.a.createElement("i",{class:"fa fa-warning"}),r.a.createElement("p",null,"Server #3 overloaded.")))),r.a.createElement("div",{class:"dropdown for-message"},r.a.createElement("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:"message","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{class:"ti-email"}),r.a.createElement("span",{class:"count bg-primary"},"9")),r.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"message"},r.a.createElement("p",{class:"red"},"You have 4 Mails"),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-1",href:"#"},r.a.createElement("span",{class:"photo media-left"},r.a.createElement("img",{alt:"avatar",src:"images/avatar/1.jpg"})),r.a.createElement("span",{class:"message media-body"},r.a.createElement("span",{class:"name float-left"},"Jonathan Smith"),r.a.createElement("span",{class:"time float-right"},"Just now"),r.a.createElement("p",null,"Hello, this is an example msg"))),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-4",href:"#"},r.a.createElement("span",{class:"photo media-left"},r.a.createElement("img",{alt:"avatar",src:"images/avatar/2.jpg"})),r.a.createElement("span",{class:"message media-body"},r.a.createElement("span",{class:"name float-left"},"Jack Sanders"),r.a.createElement("span",{class:"time float-right"},"5 minutes ago"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur"))),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-5",href:"#"},r.a.createElement("span",{class:"photo media-left"},r.a.createElement("img",{alt:"avatar",src:"images/avatar/3.jpg"})),r.a.createElement("span",{class:"message media-body"},r.a.createElement("span",{class:"name float-left"},"Cheryl Wheeler"),r.a.createElement("span",{class:"time float-right"},"10 minutes ago"),r.a.createElement("p",null,"Hello, this is an example msg"))),r.a.createElement("a",{class:"dropdown-item media bg-flat-color-3",href:"#"},r.a.createElement("span",{class:"photo media-left"},r.a.createElement("img",{alt:"avatar",src:"images/avatar/4.jpg"})),r.a.createElement("span",{class:"message media-body"},r.a.createElement("span",{class:"name float-left"},"Rachel Santos"),r.a.createElement("span",{class:"time float-right"},"15 minutes ago"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur"))))))),r.a.createElement("div",{class:"col-sm-5"},r.a.createElement("div",{class:"user-area dropdown float-right"},r.a.createElement("a",{href:"#",class:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("img",{class:"user-avatar rounded-circle",src:"images/admin.jpg",alt:"User Avatar"})),r.a.createElement("div",{class:"user-menu dropdown-menu"},r.a.createElement("a",{class:"nav-link",href:"#"},r.a.createElement("i",{class:"fa fa-user"})," My Profile"),r.a.createElement("a",{class:"nav-link",href:"#"},r.a.createElement("i",{class:"fa fa-user"})," Notifications ",r.a.createElement("span",{class:"count"},"13")),r.a.createElement("a",{class:"nav-link",href:"#"},r.a.createElement("i",{class:"fa fa-cog"})," Settings"),r.a.createElement("a",{class:"nav-link"},r.a.createElement(m.c,{to:"/"},r.a.createElement("i",{class:"fa fa-power-off"})," Logout")))),r.a.createElement("div",{class:"language-select dropdown",id:"language-select"},r.a.createElement("a",{class:"dropdown-toggle",href:"#","data-toggle":"dropdown",id:"language","aria-haspopup":"true","aria-expanded":"true"},r.a.createElement("i",{class:"flag-icon flag-icon-us"})),r.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"language"},r.a.createElement("div",{class:"dropdown-item"},r.a.createElement("span",{class:"flag-icon flag-icon-fr"})),r.a.createElement("div",{class:"dropdown-item"},r.a.createElement("i",{class:"flag-icon flag-icon-es"})),r.a.createElement("div",{class:"dropdown-item"},r.a.createElement("i",{class:"flag-icon flag-icon-us"})),r.a.createElement("div",{class:"dropdown-item"},r.a.createElement("i",{class:"flag-icon flag-icon-it"})))))))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmitExperience=function(e){e.preventDefault()},a.onSubmitExperience=a.onSubmitExperience.bind(Object(S.a)(Object(S.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("aside",{id:"left-panel",class:"left-panel"},r.a.createElement("nav",{class:"navbar navbar-expand-sm navbar-default"},r.a.createElement("div",{class:"navbar-header"},r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#main-menu","aria-controls":"main-menu","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("i",{class:"fa fa-bars"})),r.a.createElement("a",{class:"navbar-brand",href:"./"},r.a.createElement("h5",null,"MEDthreat")),r.a.createElement("a",{class:"navbar-brand hidden",href:"./"},"M")),r.a.createElement("div",{id:"main-menu",class:"main-menu collapse navbar-collapse"},r.a.createElement("ul",{class:"nav navbar-nav"},r.a.createElement("h3",{class:"menu-title"},"User"),r.a.createElement("li",{class:"menu-item-has-children dropdown"},r.a.createElement("a",{href:"#",class:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," ",r.a.createElement("i",{class:"menu-icon fa fa-laptop"}),"Actions"),r.a.createElement("ul",{class:"sub-menu children dropdown-menu"},r.a.createElement("li",null,r.a.createElement(m.c,{to:"/drug"},r.a.createElement("i",{className:"fa fa-puzzle-piece"}),"Drug")))),Object(E.d)(["ROLE_ADMIN"])?r.a.createElement("h3",{class:"menu-title"},"Admin"):"",Object(E.d)(["ROLE_ADMIN"])?r.a.createElement("li",{class:"menu-item-has-children dropdown"},r.a.createElement("a",{href:"#",class:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," ",r.a.createElement("i",{class:"menu-icon fa fa-tasks"}),"Actions"),r.a.createElement("ul",{class:"sub-menu children dropdown-menu"},r.a.createElement("li",null,r.a.createElement(m.c,{to:"/users"},r.a.createElement("i",{className:"fa fa-puzzle-piece"}),"Users")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/audit-trails"},r.a.createElement("i",{className:"fa fa-puzzle-piece"}),"Audit")))):""))))}}]),t}(n.Component),F=function(e){function t(e){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"breadcrumbs"},r.a.createElement("div",{class:"col-sm-4"},r.a.createElement("div",{class:"page-header float-left"},r.a.createElement("div",{class:"page-title"},r.a.createElement("h1",null,this.props.menu)))),r.a.createElement("div",{class:"col-sm-8"},r.a.createElement("div",{class:"page-header float-right"},r.a.createElement("div",{class:"page-title"},r.a.createElement("ol",{class:"breadcrumb text-right"},r.a.createElement("li",{class:"active"},this.props.submenu))))))}}]),t}(n.Component),P=(n.Component,a(375),a(206)),q=(a(186),a(119)),G=a(108),Y=(a(199),a(86)),J=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchAllDrugs"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/drug/get-all-drugs/validate"),method:T.g}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createDrug"),e.abrupt("return",Object(E.b)({userAccessToken:!0,data:{requestBody:t},headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/drug/create-drug"),method:T.h}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteDrug"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/drug/delete-drug/").concat(t),method:T.e}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createDrug"),e.abrupt("return",Object(E.b)({userAccessToken:!0,data:t,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/drug/update-drug"),method:T.i}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),$=O.a.Item,Q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=O.a.create()(X);return r.a.createElement(e,{rediredt:this.props.history.push})}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onsubmitDrug=function(e){e.preventDefault(),a.setState({isloading:!0}),a.props.form.validateFields(function(e,t){e||(console.log(t),K(t).then(function(e){console.log(e.data),e.data&&(y.a.success({message:"MEDTHREAT",description:"Drug Created Successfully"}),a.props.form.resetFields(),a.getAllDrugs())}).catch(function(e){console.log("Drug Error Response"),y.a.error({message:"MEDTHREAT",description:"Error Occured Creating Drug ."}),a.setState({isloading:!1}),console.log(e.response.status),Object(E.c)(a.props.rediredt)})),a.setState({isloading:!1})})},a.getAllDrugs=function(){a.setState({isloading:!0}),J().then(function(e){console.log("drug Response"),console.log(e.data),a.setState({drugs:e.data}),a.setState({isloading:!1})}).catch(function(e){console.log("drug Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Fetching Drug ."}),console.log(e.response.status),Object(E.c)(a.props.rediredt)})},a.deleteDrug=function(e){console.log(e),W(e).then(function(e){console.log("drug Response"),console.log(e.data),a.getAllDrugs()}).catch(function(e){console.log("drug Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Occured Deleting Drug ."}),console.log(e),Object(E.c)(a.props.rediredt)})},a.updateDrug=function(){a.setState({visible:!1});var e=a.state,t=e.drug,n=e.name,r=e.amount,l=e.alias,s={id:t.id,name:n.value,amount:r.value,alias:l.value};V(s).then(function(e){console.log(e.data),e.data&&(y.a.success({message:"MEDTHREAT",description:"Drug Updated Successfully"}),a.getAllDrugs(),a.setState({drug:{}}))}).catch(function(e){console.log("Drug Error Response"),y.a.error({message:"MEDTHREAT",description:"Error Occured Updating Drug ."}),a.setState({isloading:!1}),console.log(e.response.status),Object(E.c)(a.props.rediredt)})},a.enableDrugModal=function(e){a.setState({drug:e}),a.setState({name:{value:e.name,validateStatus:"success"}}),a.setState({amount:{value:e.amount,validateStatus:"success"}}),a.setState({alias:{value:e.alias,validateStatus:"success"}}),a.setState({visible:!0})},a.cancelDrugModal=function(e){a.setState({visible:!1})},a.cancelDrug=function(){},a.validateInput=function(e){return e?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"This field is required"}},a.insiderAttackSwitch=function(e){console.log("insiderAttackSwitch"),console.log(e),a.setState({insiderAttackStatus:e})},a.mapDrugTables=function(){var e=r.a.createElement("tr",{style:{width:"100%"},className:"col-md-12"},"No drug");return a.state.drugs&&(e=a.state.drugs.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.alias),r.a.createElement("td",null,Object(E.d)(["ROLE_USER_DELETE_DRUG"])||a.state.insiderAttackStatus?r.a.createElement(Y.a,{title:"Are you sure delete this Item?",onConfirm:function(t){return a.deleteDrug(e.id)},onCancel:a.cancelDrug(),okText:"Yes",cancelText:"No"},r.a.createElement("button",{style:{margin:"5px"},type:"button",class:"btn btn-danger btn-sm"},"DELETE")):"",Object(E.d)(["ROLE_USER_UPDATE_DRUG"])||a.state.insiderAttackStatus?r.a.createElement("button",{type:"button",onClick:function(t){return a.enableDrugModal(e)},class:"btn btn-primary btn-sm"},"UPDATE"):""))})),e},a.state={drugs:[],isloading:!0,drug:{},visible:!1,name:{value:"",validateStatus:""},amount:{value:"",validateStatus:""},alias:{value:"",validateStatus:""},insiderAttackStatus:!1},a.onsubmitDrug=a.onsubmitDrug.bind(Object(S.a)(Object(S.a)(a))),a.deleteDrug=a.deleteDrug.bind(Object(S.a)(Object(S.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllDrugs()}},{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(G.a)({},n,Object(k.a)({value:r},t(r))))}},{key:"isFormInvalid",value:function(){return!("success"===this.state.name.validateStatus&&"success"===this.state.amount.validateStatus&&"success"===this.state.alias.validateStatus)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement("div",{style:{background:"#f1f2f7",display:"table",fontFamily:"'Open Sans' sans-serif !important",fontSize:"16px",width:"100%"}},r.a.createElement(H,null),r.a.createElement("div",{class:"right-panel "},r.a.createElement(B,null),r.a.createElement(F,{menu:"Drug",submenu:" "}),r.a.createElement("div",{class:"content mt-3"},r.a.createElement("div",{class:"animated fadeIn"},r.a.createElement(q.a,{title:"UPDATE DRUG Modal",visible:this.state.visible,onOk:this.updateDrug,okButtonProps:{disabled:this.isFormInvalid()},onCancel:this.cancelDrugModal,okText:"UPDATE"},r.a.createElement("div",{className:"row"},r.a.createElement(O.a,{onSubmit:this.handleSubmit,className:"signup-form"},r.a.createElement($,{label:"Name",validateStatus:this.state.name.validateStatus,help:this.state.name.errorMsg},r.a.createElement(b.a,{size:"large",name:"name",autoComplete:"off",placeholder:"Drug name",value:this.state.name.value,onChange:function(t){return e.handleInputChange(t,e.validateInput)}})),r.a.createElement($,{label:"Amount",validateStatus:this.state.amount.validateStatus,help:this.state.amount.errorMsg},r.a.createElement(b.a,{size:"large",name:"amount",autoComplete:"off",placeholder:"Amount in number e.g 100",value:this.state.amount.value,onChange:function(t){return e.handleInputChange(t,e.validateInput)}})),r.a.createElement($,{label:"Alias",validateStatus:this.state.alias.validateStatus,help:this.state.alias.errorMsg},r.a.createElement(b.a,{size:"large",name:"alias",autoComplete:"off",placeholder:"Alias e.g Pz",value:this.state.alias.value,onChange:function(t){return e.handleInputChange(t,e.validateInput)}}))))),r.a.createElement(h.a,{spinning:this.state.isloading},r.a.createElement("div",{className:"row"},Object(E.d)(["ROLE_USER_CREATE_DRUG"])||this.state.insiderAttackStatus?r.a.createElement("div",{class:"col-lg-9"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-header"},r.a.createElement("strong",null,"Drug"),r.a.createElement("small",null," Form")),r.a.createElement("form",{onSubmit:this.onsubmitDrug},r.a.createElement("div",{class:"card-body card-block"},r.a.createElement("div",{class:"form-group"},r.a.createElement($,null,r.a.createElement("label",{class:" form-control-label"},"Name"),t("name",{rules:[{required:!0,message:"Please input your Name!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"name",placeholder:"Enter your Drug name"})))),r.a.createElement("div",{class:"form-group"},r.a.createElement($,null,r.a.createElement("label",{for:"company",class:" form-control-label"},"Amount"),t("amount",{rules:[{required:!0,message:"Please input Amount!"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"amount",placeholder:"Enter your Amount"})))),r.a.createElement("div",{class:"form-group"},r.a.createElement($,null,r.a.createElement("label",{for:"company",class:" form-control-label"},"Alias"),t("alias",{rules:[{required:!0,message:"Please input Alias !"}]})(r.a.createElement(b.a,{prefix:r.a.createElement(v.a,{type:"lock"}),name:"alias",placeholder:"Enter your Drug Alias"})))),r.a.createElement("div",{class:"form-group"},r.a.createElement($,null,r.a.createElement("button",{type:"submit",className:"btn pull-right btn-primary btn-flat m-b-30 m-t-30"},"Create"))))))):" ",r.a.createElement("div",{class:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-header"},r.a.createElement("strong",null,"Insider"),r.a.createElement("small",null," Attacker")),r.a.createElement("div",{className:"card-body"},r.a.createElement(P.a,{checkedChildren:"Enabled",unCheckedChildren:"Disabled",onChange:function(t){return e.insiderAttackSwitch(t)}}))))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("strong",{className:"card-title"},"Data Table")),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{id:"bootstrap-data-table-export",className:"table table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Alias"),Object(E.d)(["ROLE_USER_UPDATE_DRUG","ROLE_USER_DELETE_DRUG"])||this.state.insiderAttackStatus?r.a.createElement("th",null,"Settings"):"")),r.a.createElement("tbody",null,this.mapDrugTables())))))))))))}}]),t}(n.Component),Z=Q,ee=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchAllAuditTrails"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/audit/get-all-audits/validate"),method:T.g}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),te=(a(198),a(118)),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getLegalStatusTag=function(e){var t="badge badge-primary";return"LEGAL"==e?t="badge badge-success":"ILLEGAL"==e&&(t="badge badge-danger"),r.a.createElement("span",{className:t},e)},a.getTableHeader=function(){return[{title:"Full Name",dataIndex:"user",key:"user",render:function(e){return a.getUserFullName(e)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Target Url",dataIndex:"target_url",key:"target_url"},{title:"ip",dataIndex:"ip",key:"ip"},{title:"Legal Status",dataIndex:"legal_status",key:"legal_status",render:function(e){return r.a.createElement("span",null,a.getLegalStatusTag(e))}},{title:"Action",dataIndex:"action",key:"action"}]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getUserFullName",value:function(e){var t="";return e&&null!=e&&(t="".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("span",null,t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("strong",{className:"card-title"},"Audit Table")),r.a.createElement("div",{className:"card-body"},r.a.createElement(te.a,{columns:this.getTableHeader(),expandedRowRender:function(e){return r.a.createElement("p",{style:{margin:0}},e.request)},dataSource:this.props.auditTrails})))}}]),t}(n.Component),ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getAllAuditTrails=function(){a.setState({isloading:!0}),ee().then(function(e){console.log("drug Response"),console.log(e.data),a.setState({auditTrails:e.data}),a.setState({isloading:!1})}).catch(function(e){console.log("drug Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Fetching Drug ."}),console.log(e.response)})},a.state={auditTrails:[],isloading:!0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllAuditTrails()}},{key:"render",value:function(){return r.a.createElement("div",{style:{background:"#f1f2f7",display:"table",fontFamily:"'Open Sans' sans-serif !important",fontSize:"16px",width:"100%"}},r.a.createElement(H,null),r.a.createElement("div",{class:"right-panel "},r.a.createElement(B,null),r.a.createElement(F,{menu:"Audit Trail",submenu:""}),r.a.createElement("div",{class:"content mt-3"},r.a.createElement("div",{class:"animated fadeIn"},r.a.createElement(h.a,{spinning:this.state.isloading},r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(ae,{auditTrails:this.state.auditTrails}))))))))}}]),t}(n.Component),re=(a(197),a(117)),le=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchAllUsers"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/user/get-all-users/validate"),method:T.g}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(x.a)(U.a.mark(function e(t){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t},console.log("blockUser"),e.abrupt("return",Object(E.b)({userAccessToken:!0,data:{requestBody:a},headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/user/block-user-by-email"),method:T.i}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(x.a)(U.a.mark(function e(t){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t},console.log("unBlockUser"),e.abrupt("return",Object(E.b)({userAccessToken:!0,data:{requestBody:a},headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/user/unblock-user-by-email"),method:T.i}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getAccontLockedInfo=function(e){var t={clazz:"badge badge-info",display:"Active"};return 1==e&&(t={clazz:"badge badge-danger",display:"Blocked"}),r.a.createElement("span",{className:t.clazz},t.display)},a.unblockUzer=function(e){ce(e).then(function(e){console.log("Users Response"),console.log(e.data),a.getAllUsers()}).catch(function(e){console.log("User Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Occured UnBlocking User Users ."}),a.setState({isloading:!1}),console.log(e)})},a.blockUzer=function(e){se(e).then(function(e){console.log("Users Response"),console.log(e.data),a.getAllUsers()}).catch(function(e){console.log("User Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Occured Blocking User Users ."}),a.setState({isloading:!1}),console.log(e)})},a.getTableHeader=function(){return[{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone Number",dataIndex:"phoneNo",key:"phoneNo"},{title:"Roles",dataIndex:"roles",key:"roles",render:function(e){return r.a.createElement("span",null,e.map(function(e){return r.a.createElement("span",{className:"badge badge-secondary"},e.name)}))}},{title:"UnAuthorized Activity",dataIndex:"illegalCount",key:"illegalCount"},{title:"Account Status",dataIndex:"block",key:"block",render:function(e){return r.a.createElement("span",null,a.getAccontLockedInfo(e))}},{title:"Action",key:"action",render:function(e,t){return r.a.createElement("span",null,Object(E.d)(["ROLE_ADMIN_BLOCK_USER"])?0==t.block?r.a.createElement(Y.a,{title:"Are you sure you want to Block this User?",onConfirm:function(e){a.blockUzer(t.email)},onCancel:a.cancelDrug(),okText:"Yes",cancelText:"No"},r.a.createElement("button",{type:"button",style:{marginBottom:"5px"},class:"btn btn-danger btn-sm"},"Block")):r.a.createElement(Y.a,{title:"Are you sure you want to UnBlock this User?",onConfirm:function(e){a.unblockUzer(t.email)},onCancel:a.cancelDrug(),okText:"Yes",cancelText:"No"},r.a.createElement("button",{type:"button",style:{marginBottom:"5px"},class:"btn btn-primary btn-sm"},"UnBlock")):"",r.a.createElement(re.a,{type:"vertical"}),r.a.createElement("button",{onClick:function(e){a.props.history.push("/single-user/".concat(t.id))},type:"button",class:"btn btn-primary btn-sm"},"View Audit Trail"))}}]},a.getAllUsers=function(){a.setState({isloading:!0}),le().then(function(e){console.log("Users Response"),console.log(e.data),a.setState({users:e.data}),a.setState({isloading:!1})}).catch(function(e){console.log("User Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Fetching Users ."}),a.setState({isloading:!1}),console.log(e)})},a.deleteDrug=function(e){console.log(e)},a.cancelDrug=function(){},a.mapDrugTables=function(){var e=r.a.createElement("tr",{style:{width:"100%"},className:"col-md-12"},"No drug");return a.state.drugs&&(e=a.state.drugs.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.alias),r.a.createElement("td",null,r.a.createElement(Y.a,{title:"Are you sure delete this Item?",onConfirm:function(t){return a.deleteDrug(e)},onCancel:a.cancelDrug(),okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"#",style:{margin:"5px"}},"Delete")),r.a.createElement("button",{type:"button",class:"btn btn-primary btn-sm"},"Delete")))})),e},a.state={users:[],isloading:!0},a.unblockUzer=a.unblockUzer.bind(Object(S.a)(Object(S.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getAllUsers()}},{key:"render",value:function(){return r.a.createElement("div",{style:{background:"#f1f2f7",display:"table",fontFamily:"'Open Sans' sans-serif !important",fontSize:"16px",width:"100%"}},r.a.createElement(H,null),r.a.createElement("div",{class:"right-panel "},r.a.createElement(B,null),r.a.createElement(F,{menu:"User",submenu:" "}),r.a.createElement("div",{class:"content mt-3"},r.a.createElement("div",{class:"animated fadeIn"},r.a.createElement(h.a,{spinning:this.state.isloading},r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("strong",{className:"card-title"},"Data Table")),r.a.createElement("div",{className:"card-body"},r.a.createElement(te.a,{columns:this.getTableHeader(),dataSource:this.state.users}))))))))))}}]),t}(n.Component),ie=(a(436),a(211)),ue=(a(187),a(62)),de=(a(441),a(157)),me=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchOneUser"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/user/get-user-by-id/").concat(t),method:T.g}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchOneUserAuditTrail"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/audit/get-all-audits-by-userId/").concat(t),method:T.g}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(x.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchAllroles"),e.abrupt("return",Object(E.b)({userAccessToken:!0,headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/role/get-all-roles/validate"),method:T.g}));case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(x.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchAllroles"),e.abrupt("return",Object(E.b)({userAccessToken:!0,data:{requestBody:t},headerType:"application/json",headerTypeData:!0,url:"".concat(T.a,"/api/v1/user/update-user-roles-email"),method:T.i}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fe=de.a.Meta,he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getSingleUser=function(e){a.setState({isUserloading:!0}),me(e).then(function(e){console.log("Users Response"),console.log(e.data),a.setState({user:e.data}),a.setState({isUserloading:!1})}).catch(function(e){console.log("User Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Fetching User ."}),a.setState({isUserloading:!1}),console.log(e)})},a.getSingleUserAuditTrails=function(e){a.setState({isloading:!0}),pe(e).then(function(e){console.log("Audit one Response"),console.log(e.data),a.setState({auditTrails:e.data}),a.setState({isloading:!1})}).catch(function(e){console.log("Audit Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Fetching Audit Trail ."}),a.setState({isloading:!1}),console.log(e)})},a.getAccontLockedInfo=function(e){var t={clazz:"badge badge-info",display:"Active"};return 1==e&&(t={clazz:"badge badge-danger",display:"Blocked"}),r.a.createElement("span",{className:t.clazz},t.display)},a.onSelectRole=function(e){y.a.info({message:"MEDTHREAT",description:"".concat(e.length," Roles Selected .")}),a.setState({newUserRoles:e}),console.log("checked = ",e)},a.addRolesToUser=function(){a.setState({visible:!1});var e=a.state.user.roles,t=a.state.systemRoles.map(function(t){if(!e.includes(t))return t}),n=[];t.forEach(function(e){var t={label:e.name,value:e.id};n.push(t)}),a.setState({checkBoxModal:{title:"Allocate Roles",roles:n}}),a.setState({visible:!0}),console.log("lol")},a.removeRolesToUser=function(){a.setState({visible:!1});var e=a.state.user.roles,t=[];e.forEach(function(e){var a={label:e.name,value:e.id};t.push(a)}),a.setState({checkBoxModal:{title:"De-Allocate Roles",roles:t}}),a.setState({visible:!0}),console.log("lol")},a.updateRoles=function(){a.setState({visible:!1}),a.setState({isUserloading:!1});var e={userId:a.state.user.id,roleIds:a.state.newUserRoles};Ee(e).then(function(e){console.log("Users Response"),console.log(e.data),a.getSingleUser(a.state.user.id),a.setState({isUserloading:!1}),y.a.success({message:"MEDTHREAT",description:"Updated User Role Successfully ."})}).catch(function(e){console.log("User Error Response"),y.a.error({message:"MEDTHREAT",description:"Error Updating User Role ."}),a.setState({isUserloading:!1}),console.log(e)})},a.canUpdateRole=function(){return a.state.newUserRoles.length>0},a.cancelUpdates=function(){a.setState({checkBoxModal:{title:" ",roles:[]}}),a.setState({newUserRoles:[]}),a.setState({visible:!1})},a.state={user:{roles:[]},systemRoles:[],userId:null,auditTrails:[],isloading:!0,isUserloading:!0,checkBoxModal:{title:"",roles:[]},visible:!1,newUserRoles:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;this.setState({userId:e.userId}),this.getSingleUser(e.userId),this.getSingleUserAuditTrails(e.userId),this.getAllRoles()}},{key:"getAllRoles",value:function(){var e=this;this.setState({isUserloading:!0}),ge().then(function(t){console.log("Roles Response"),console.log(t.data),e.setState({systemRoles:t.data}),e.setState({isUserloading:!1})}).catch(function(t){console.log("Roles Error Response"),y.a.error({message:"MEDTHREAT",description:"An Error Occured Fetching Roles ."}),e.setState({isUserloading:!1}),console.log(t)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.checkBoxModal,l=Object(E.d)(["ROLE_ADMIN_BLOCK_USER"])?r.a.createElement("a",{onClick:function(){e.addRolesToUser()}},r.a.createElement(v.a,{type:"plus-circle"})):r.a.createElement("a",null,r.a.createElement(v.a,{type:"plus-circle"})),s=Object(E.d)(["ROLE_ADMIN_BLOCK_USER"])?r.a.createElement("a",{onClick:function(){e.removeRolesToUser()}},r.a.createElement(v.a,{type:"minus-circle",key:"edit"})):r.a.createElement("a",null,r.a.createElement(v.a,{type:"minus-circle",key:"edit"}));return r.a.createElement("div",{style:{background:"#f1f2f7",display:"table",fontFamily:"'Open Sans' sans-serif !important",fontSize:"16px",width:"100%"}},r.a.createElement(H,null),r.a.createElement("div",{class:"right-panel "},r.a.createElement(B,null),r.a.createElement(F,{menu:"User",submenu:"User Information"}),r.a.createElement("div",{class:"content mt-3"},r.a.createElement("div",{class:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(q.a,{title:n.title,visible:this.state.visible,onOk:this.updateRoles,okButtonProps:{disabled:!this.canUpdateRole()},onCancel:this.cancelUpdates,okText:"UPDATE"},r.a.createElement(ue.a.Group,{options:n.roles,onChange:this.onSelectRole}))),r.a.createElement(h.a,{spinning:this.state.isUserloading},r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(de.a,{style:{width:"100%",marginTop:16},actions:[l,s,r.a.createElement(v.a,{type:"ellipsis",key:"ellipsis"})]},r.a.createElement(fe,{avatar:r.a.createElement(ie.a,{size:"large",icon:"user"}),title:"User details",description:"User description"}),r.a.createElement("p",null,r.a.createElement("b",null,"FullName"),": ",a.firstName," ",a.lastName),r.a.createElement("p",null,r.a.createElement("b",null,"Phone Number "),": ",a.phoneNo),r.a.createElement("p",null,r.a.createElement("b",null,"Email"),": ",a.email),r.a.createElement("p",null,r.a.createElement("b",null," UnAuthorized Activity Count block"),": ",a.illegalCount),r.a.createElement("p",null,r.a.createElement("b",null," Account Status"),":  ",this.getAccontLockedInfo(a.block)),r.a.createElement("p",null,r.a.createElement("b",null,"Roles:"),a.roles.map(function(e){return r.a.createElement("span",null,r.a.createElement("span",{className:"badge badge-secondary"},e.name),r.a.createElement(re.a,{type:"vertical"}))})))))),r.a.createElement(h.a,{spinning:this.state.isloading},r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(ae,{auditTrails:this.state.auditTrails}))))))))}}]),t}(n.Component),be=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:null,isLoading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.b,null,r.a.createElement(p.b,{exact:!0,path:"/",component:R}),r.a.createElement(p.b,{exact:!0,path:"/sign-up",component:L}),r.a.createElement(f,{exact:!0,path:"/drug",component:Z}),r.a.createElement(f,{exact:!0,path:"/audit-trails",component:ne}),r.a.createElement(f,{exact:!0,path:"/users",component:oe}),r.a.createElement(f,{exact:!0,path:"/single-user/:userId",component:he}))}}]),t}(n.Component),ve=Object(p.f)(be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(m.a,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[215,1,2]]]);
//# sourceMappingURL=main.33a71bd3.chunk.js.map