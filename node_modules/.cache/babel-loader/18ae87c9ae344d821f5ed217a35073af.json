{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ddada/Documents/danpersonal/livejavaproject/medthreat/medthreat-ui2/node_modules/@babel/runtime/regenerator\";\nimport \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nimport _asyncToGenerator from \"/Users/ddada/Documents/danpersonal/livejavaproject/medthreat/medthreat-ui2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { APP_ACCESS_TOKEN, API_BASE_URL, GETMETHOD, POSTMETHOD, PUTMETHOD, DELETEMETHOD } from '../../constants';\nimport { axiosRequest } from '../../utils/api-utils';\nexport function login(loginRequest) {\n  loginRequest.grant_type = 'password';\n  loginRequest.scope = 'profile';\n  var formBody = [];\n\n  for (var property in loginRequest) {\n    var encodedKey = encodeURIComponent(property);\n    var encodedValue = encodeURIComponent(loginRequest[property]);\n    formBody.push(encodedKey + \"=\" + encodedValue);\n  }\n\n  formBody = formBody.join(\"&\");\n  return axiosRequest({\n    url: API_BASE_URL + '/oauth/token',\n    method: POSTMETHOD,\n    body: formBody,\n    useBasic: true\n  });\n}\n\nvar getBasicAuthentication =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var formData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // const options =  \n            // { headers:\n            //      {'Content-Type': 'application/json', 'Authorization': `${getBasicAuth(APP_CLIENT, APP_PASS)}` } \n            // };\n            formData = new FormData();\n            formData.append(\"grant_type\", \"client_credentials\"); // let data = {\"grant_type\":\"client_credentials\"}\n            // this doesnt work\n            // return axios.post(`${API_BASE_URL}/oauth/token`,formData, options)\n\n            _context.next = 4;\n            return axiosRequest({\n              useBasic: true,\n              data: formData,\n              url: \"\".concat(API_BASE_URL, \"/oauth/token\"),\n              method: POSTMETHOD\n            }).then(function (response) {\n              console.log(\"calling getBasicAuthentication\");\n              localStorage.setItem(APP_ACCESS_TOKEN, response.data.access_token);\n            }).catch(function (error) {\n              _notification['error']({\n                message: 'MEDTHREAT',\n                description: \"Server Error occured .\"\n              });\n\n              console.log(error);\n            });\n\n          case 4:\n            ;\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getBasicAuthentication() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport var signUp =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(form) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"signUp\");\n            _context2.next = 3;\n            return getBasicAuthentication();\n\n          case 3:\n            return _context2.abrupt(\"return\", axiosRequest({\n              useAppAccessToken: true,\n              data: form,\n              url: \"\".concat(API_BASE_URL, \"/api/v1/user/create-sign-up\"),\n              method: POSTMETHOD,\n              headerTypeData: false\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function signUp(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/ddada/Documents/danpersonal/livejavaproject/medthreat/medthreat-ui2/src/pages/signup/sign-api.js"],"names":["APP_ACCESS_TOKEN","API_BASE_URL","GETMETHOD","POSTMETHOD","PUTMETHOD","DELETEMETHOD","axiosRequest","login","loginRequest","grant_type","scope","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","url","method","body","useBasic","getBasicAuthentication","formData","FormData","append","data","then","response","console","log","localStorage","setItem","access_token","catch","error","message","description","signUp","form","useAppAccessToken","headerTypeData"],"mappings":";;;;AAAA,SAAQA,gBAAR,EAAyBC,YAAzB,EAAsCC,SAAtC,EAAgDC,UAAhD,EAA2DC,SAA3D,EAAqEC,YAArE,QAAwF,iBAAxF;AAEA,SAAQC,YAAR,QAA4B,uBAA5B;AAIA,OAAO,SAASC,KAAT,CAAeC,YAAf,EAA6B;AAChCA,EAAAA,YAAY,CAACC,UAAb,GAA0B,UAA1B;AACAD,EAAAA,YAAY,CAACE,KAAb,GAAqB,SAArB;AAEA,MAAIC,QAAQ,GAAG,EAAf;;AACA,OAAK,IAAIC,QAAT,IAAqBJ,YAArB,EAAmC;AAC/B,QAAIK,UAAU,GAAGC,kBAAkB,CAACF,QAAD,CAAnC;AACA,QAAIG,YAAY,GAAGD,kBAAkB,CAACN,YAAY,CAACI,QAAD,CAAb,CAArC;AACAD,IAAAA,QAAQ,CAACK,IAAT,CAAcH,UAAU,GAAG,GAAb,GAAmBE,YAAjC;AACH;;AACDJ,EAAAA,QAAQ,GAAGA,QAAQ,CAACM,IAAT,CAAc,GAAd,CAAX;AAEA,SAAOX,YAAY,CAAC;AAChBY,IAAAA,GAAG,EAAEjB,YAAY,GAAG,cADJ;AAEhBkB,IAAAA,MAAM,EAAEhB,UAFQ;AAGhBiB,IAAAA,IAAI,EAAET,QAHU;AAIhBU,IAAAA,QAAQ,EAAE;AAJM,GAAD,CAAnB;AAMH;;AAED,IAAMC,sBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAC3B;AACA;AACA;AACA;AACMC,YAAAA,QALqB,GAKV,IAAIC,QAAJ,EALU;AAM3BD,YAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA6B,oBAA7B,EAN2B,CAO3B;AACA;AACA;;AAT2B;AAAA,mBAWrBnB,YAAY,CAAC;AACfe,cAAAA,QAAQ,EAAE,IADK;AAEfK,cAAAA,IAAI,EAAEH,QAFS;AAGfL,cAAAA,GAAG,YAAKjB,YAAL,iBAHY;AAIfkB,cAAAA,MAAM,EAAEhB;AAJO,aAAD,CAAZ,CAKHwB,IALG,CAKE,UAAAC,QAAQ,EAAG;AACfC,cAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACAC,cAAAA,YAAY,CAACC,OAAb,CAAqBhC,gBAArB,EAAuC4B,QAAQ,CAACF,IAAT,CAAcO,YAArD;AAEH,aATK,EASHC,KATG,CASG,UAACC,KAAD,EAAU;AAEf,4BAAa,OAAb,EAAsB;AAClBC,gBAAAA,OAAO,EAAE,WADS;AAElBC,gBAAAA,WAAW;AAFO,eAAtB;;AAMAR,cAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AAEH,aAnBK,CAXqB;;AAAA;AA8BxB;;AA9BwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAtBb,sBAAsB;AAAA;AAAA;AAAA,GAA5B;;AAiCA,OAAO,IAAMgB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAE,kBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AACjBV,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AADiB;AAAA,mBAEVR,sBAAsB,EAFZ;;AAAA;AAAA,8CAIThB,YAAY,CAAC;AACjBkC,cAAAA,iBAAiB,EAAE,IADF;AAEjBd,cAAAA,IAAI,EAAEa,IAFW;AAGjBrB,cAAAA,GAAG,YAAKjB,YAAL,gCAHc;AAIjBkB,cAAAA,MAAM,EAAEhB,UAJS;AAKjBsC,cAAAA,cAAc,EAAC;AALE,aAAD,CAJH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAF;;AAAA,kBAANH,MAAM;AAAA;AAAA;AAAA,GAAZ","sourcesContent":["import {APP_ACCESS_TOKEN,API_BASE_URL,GETMETHOD,POSTMETHOD,PUTMETHOD,DELETEMETHOD} from '../../constants';\nimport { notification} from 'antd';\nimport {axiosRequest} from  '../../utils/api-utils'\n\n\n\nexport function login(loginRequest) {\n    loginRequest.grant_type = 'password';\n    loginRequest.scope = 'profile';\n\n    let formBody = [];\n    for (let property in loginRequest) {\n        let encodedKey = encodeURIComponent(property);\n        let encodedValue = encodeURIComponent(loginRequest[property]);\n        formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n\n    return axiosRequest({\n        url: API_BASE_URL + '/oauth/token',\n        method: POSTMETHOD,\n        body: formBody,\n        useBasic: true\n    });\n} \n\nconst getBasicAuthentication = async ()=>{\n    // const options =  \n    // { headers:\n    //      {'Content-Type': 'application/json', 'Authorization': `${getBasicAuth(APP_CLIENT, APP_PASS)}` } \n    // };\n    const formData = new FormData();\n    formData.append(\"grant_type\",\"client_credentials\")\n    // let data = {\"grant_type\":\"client_credentials\"}\n    // this doesnt work\n    // return axios.post(`${API_BASE_URL}/oauth/token`,formData, options)\n\n    await axiosRequest({\n        useBasic: true,\n        data: formData,\n        url: `${API_BASE_URL}/oauth/token`,\n        method: POSTMETHOD\n    }).then(response =>{\n        console.log(\"calling getBasicAuthentication\")\n        localStorage.setItem(APP_ACCESS_TOKEN, response.data.access_token);\n\n    }).catch((error)=> {\n        \n        notification['error']({\n            message: 'MEDTHREAT',\n            description:\n              `Server Error occured .`,\n          });\n          \n        console.log(error);\n\n    });;\n}\n\nexport const signUp= async(form)=>{\n    console.log(\"signUp\")\n     await getBasicAuthentication()\n    \n     return axiosRequest({\n        useAppAccessToken: true,\n        data: form,\n        url: `${API_BASE_URL}/api/v1/user/create-sign-up`,\n        method: POSTMETHOD,\n        headerTypeData:false\n    })\n}\n\n"]},"metadata":{},"sourceType":"module"}